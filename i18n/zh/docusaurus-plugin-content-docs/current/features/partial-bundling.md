# 局部打包
追溯到 Webpack 时代，开发者经常使用 `splitChunks` 来分割包，试图优化资源加载时间并提高缓存命中率。 但配置 splitChunks 比较复杂，而且有时达不到想要的效果。

新的构建工具比如 Vite，又基于原生的 ESM 不进行打包，提高了缓存命中率，但是这又会导致资源请求量大，导致页面加载时间大幅上升。

事实上，我们需要取得是打包与不打包之间的一种平衡，保证缓存命中率同时提升资源加载速度。因此 Farm 设计了一套局部打包的算法，自动根据依赖关系和资源大小自动将一次请求涉及到的资源打包成 20-30 个小资源（测试显示，同样大小的资源，20-30 个并发加载最快），一次资源请求指 `首屏加载的资源` 或者 `使用 import()` 加载的资源。

通过局部打包算法，当项目更改时，每个小资源中的模块被同时更改的可能性最大，保证一次项目迭代，尽可能只影响到少数几个资源，其他资源都能命中缓存。

## 局部打包原理
进行中...


## 打包规则配置
进行中...